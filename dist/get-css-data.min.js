/*!
 * get-css-data
 * v1.6.2
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2019 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).getCssData=o()}(this,function(){"use strict";function e(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:o.mimeType||null,onBeforeSend:o.onBeforeSend||Function.prototype,onSuccess:o.onSuccess||Function.prototype,onError:o.onError||Function.prototype,onComplete:o.onComplete||Function.prototype},t=Array.isArray(e)?e:[e],r=Array.apply(null,Array(t.length)).map(function(e){return null});function l(){return!("<"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().charAt(0))}function s(e,o){n.onError(e,t[o],o)}function u(e,o){var l=n.onSuccess(e,t[o],o);e=!1===l?"":l||e,r[o]=e,-1===r.indexOf(null)&&n.onComplete(r)}t.forEach(function(e,o){var t=document.createElement("a");t.setAttribute("href",e),t.href=String(t.href);var r=t.host.split(":")[0],c=t.host!==location.host,i=Boolean(document.all&&!window.atob),a=t.protocol===location.protocol;if(console.log(JSON.stringify({isCrossDomain:c,"location.host":location.host,"parser.host":t.host,parserHost:r})),c&&i)if(a){var f=new XDomainRequest;f.open("GET",e),f.timeout=0,f.onprogress=Function.prototype,f.ontimeout=Function.prototype,f.onload=function(){l(f.responseText)?u(f.responseText,o):s(f,o)},f.onerror=function(e){s(f,o)},setTimeout(function(){f.send()},0)}else console.log("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol"),s(null,o);else{var p=new XMLHttpRequest;p.open("GET",e),n.mimeType&&p.overrideMimeType&&p.overrideMimeType(n.mimeType),n.onBeforeSend(p,e,o),p.onreadystatechange=function(){4===p.readyState&&(200===p.status&&l(p.responseText)?u(p.responseText,o):s(p,o))},p.send()}})}function o(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),t=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(t),n.body.appendChild(r),t.href=o,r.href=e,r.href}return function(n){var t={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},r={rootElement:n.rootElement||document,include:n.include||'style,link[rel="stylesheet"]',exclude:n.exclude||null,filter:n.filter||null,useCSSOM:n.useCSSOM||!1,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},l=Array.apply(null,r.rootElement.querySelectorAll(r.include)).filter(function(e){return o=e,n=r.exclude,!(o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector).call(o,n);var o,n}),s=Array.apply(null,Array(l.length)).map(function(e){return null});function u(){if(-1===s.indexOf(null)){var e=s.join("");r.onComplete(e,s,l)}}function c(o,n,t,l){var c=r.onSuccess(o,t,l);!function o(n,t,l,s){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=i(n,l,c);a.rules.length?e(a.absoluteUrls,{onBeforeSend:function(e,o,n){r.onBeforeSend(e,t,o)},onSuccess:function(e,o,n){var l=r.onSuccess(e,t,o),s=i(e=!1===l?"":l||e,o,c);return s.rules.forEach(function(o,n){e=e.replace(o,s.absoluteRules[n])}),e},onError:function(e,r,i){u.push({xhr:e,url:r}),c.push(a.rules[i]),o(n,t,l,s,u,c)},onComplete:function(e){e.forEach(function(e,o){n=n.replace(a.rules[o],e)}),o(n,t,l,s,u,c)}}):s(n,u)}(o=void 0!==c&&!1===Boolean(c)?"":c||o,t,l,function(e,o){null===s[n]&&(o.forEach(function(e){return r.onError(e.xhr,t,e.url)}),!r.filter||r.filter.test(e)?s[n]=e:s[n]="",u())})}function i(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l={};return l.rules=(e.replace(t.cssComments,"").match(t.cssImports)||[]).filter(function(e){return-1===r.indexOf(e)}),l.urls=l.rules.map(function(e){return e.replace(t.cssImports,"$1")}),l.absoluteUrls=l.urls.map(function(e){return o(e,n)}),l.absoluteRules=l.rules.map(function(e,t){var r=l.urls[t],s=o(l.absoluteUrls[t],n);return e.replace(r,s)}),l}l.length?l.forEach(function(n,t){var l=n.getAttribute("href"),i=n.getAttribute("rel"),a="LINK"===n.nodeName&&l&&i&&"stylesheet"===i.toLowerCase(),f="STYLE"===n.nodeName;if(a)e(l,{mimeType:"text/css",onBeforeSend:function(e,o,t){r.onBeforeSend(e,n,o)},onSuccess:function(e,r,s){var u=o(l,location.href);c(e,t,n,u)},onError:function(e,o,l){s[t]="",r.onError(e,n,o),u()}});else if(f){var p=n.textContent;r.useCSSOM&&(p=Array.apply(null,n.sheet.cssRules).map(function(e){return e.cssText}).join("")),c(p,t,n,location.href)}else s[t]="",u()}):r.onComplete("",[])}});
//# sourceMappingURL=get-css-data.min.js.map
