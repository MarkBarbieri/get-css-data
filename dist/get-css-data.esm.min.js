/*!
 * get-css-data
 * v1.3.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function getUrls(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},t=Array.isArray(e)?e:[e],r=Array.apply(null,Array(t.length)).map(function(e){return null});function l(e,n){o.onError(e,t[n],n)}function c(e,n){r[n]=e,o.onSuccess(e,t[n],n),-1===r.indexOf(null)&&o.onComplete(r)}t.forEach(function(e,n){var t=document.createElement("a");t.setAttribute("href",e),t.href=t.href;var r=t.host!==location.host,u=t.protocol===location.protocol;if(r&&"undefined"!=typeof XDomainRequest)if(u){var i=new XDomainRequest;i.open("GET",e),i.timeout=0,i.onprogress=Function.prototype,i.ontimeout=Function.prototype,i.onload=function(){c(i.responseText,n)},i.onerror=function(e){l(i,n)},setTimeout(function(){i.send()},0)}else console.log("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol"),l(null,n);else{var s=new XMLHttpRequest;s.open("GET",e),o.mimeType&&s.overrideMimeType&&s.overrideMimeType(o.mimeType),o.onBeforeSend(s,e,n),s.onreadystatechange=function(){4===s.readyState&&(200===s.status?c(s.responseText,n):l(s,n))},s.send()}})}function getCssData(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},o={include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},t=Array.apply(null,document.querySelectorAll(o.include)).filter(function(e){return!matchesSelector(e,o.exclude)}),r=Array.apply(null,Array(t.length)).map(function(e){return null});function l(){if(-1===r.indexOf(null)){var e=r.join("");o.onComplete(e,r,t)}}function c(e,t,c,u){!function e(t,r,l,c){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var s=t.replace(n.cssComments,"").match(n.cssImports);s=(s||[]).filter(function(e){return-1===i.indexOf(e)});if(s.length){var a=s.map(function(e){return e.replace(n.cssImports,"$1")}).map(function(e){return getFullUrl(e,l)});getUrls(a,{onBeforeSend:function(e,n,t){o.onBeforeSend(e,r,n)},onError:function(n,o,a){u.push({xhr:n,url:o}),i.push(s[a]),e(t,r,l,c,u,i)},onSuccess:function(n,o,l){var a=s[l],p=t.replace(a,n);e(p,r,o,c,u,i)}})}else c(t,u)}(e,c,u,function(e,n){if(null===r[t]){if(n.forEach(function(e){return o.onError(e.xhr,c,e.url)}),!o.filter||o.filter.test(e)){var i=o.onSuccess(e,c,u);r[t]=!1===i?"":i||e}else r[t]="";l()}})}t.length?t.forEach(function(e,n){var t=e.getAttribute("href"),u=e.getAttribute("rel"),i="LINK"===e.nodeName&&t&&u&&"stylesheet"===u.toLowerCase(),s="STYLE"===e.nodeName;i?getUrls(t,{mimeType:"text/css",onBeforeSend:function(n,t,r){o.onBeforeSend(n,e,t)},onError:function(t,c,u){r[n]="",o.onError(t,e,c),l()},onSuccess:function(o,r,l){var u=getFullUrl(t,location.href);c(o,n,e,u)}}):s?c(e.textContent,n,e,location.href):(r[n]="",l())}):o.onComplete("",[])}function getFullUrl(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,o=document.implementation.createHTMLDocument(""),t=o.createElement("base"),r=o.createElement("a");return o.head.appendChild(t),o.body.appendChild(r),t.href=n,r.href=e,r.href}function matchesSelector(e,n){return(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,n)}export default getCssData;
//# sourceMappingURL=get-css-data.esm.min.js.map
