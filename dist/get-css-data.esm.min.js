/*!
 * get-css-data
 * v1.2.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function getUrls(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:t.mimeType||null,onComplete:t.onComplete||Function.prototype,onError:t.onError||Function.prototype,onSuccess:t.onSuccess||Function.prototype},o=Array.isArray(e)?e:[e],r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(e,t){n.onError(e,o[t],t)}function c(e,t){r[t]=e,n.onSuccess(e,o[t],t),-1===r.indexOf(null)&&n.onComplete(r)}o.forEach(function(e,t){var o=document.createElement("a");o.setAttribute("href",e),o.href=o.href;var r=o.host!==location.host,u=o.protocol===location.protocol;if(r&&"undefined"!=typeof XDomainRequest)if(u){var s=new XDomainRequest;s.open("GET",e),s.timeout=0,s.onprogress=Function.prototype,s.ontimeout=Function.prototype,s.onload=function(){c(s.responseText,t)},s.onerror=function(e){l(s,t)},setTimeout(function(){s.send()},0)}else console.log("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol"),l(null,t);else{var i=new XMLHttpRequest;i.open("GET",e),n.mimeType&&i.overrideMimeType&&i.overrideMimeType(n.mimeType),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?c(i.responseText,t):l(i,t))},i.send()}})}function getCssData(e){var t={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},n={include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,onComplete:e.onComplete||Function.prototype,onError:e.onError||Function.prototype,onSuccess:e.onSuccess||Function.prototype},o=Array.apply(null,document.querySelectorAll(n.include)).filter(function(e){return!matchesSelector(e,n.exclude)}),r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(){if(-1===r.indexOf(null)){var e=r.join("");n.onComplete(e,r,o)}}function c(e,o,c,u){!function e(n,o,r){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var u=n.replace(t.cssComments,"").match(t.cssImports);u=(u||[]).filter(function(e){return-1===c.indexOf(e)});if(u.length){var s=u.map(function(e){return e.replace(t.cssImports,"$1")}).map(function(e){return getFullUrl(e,o)});getUrls(s,{onError:function(t,s,i){l.push({xhr:t,url:s}),c.push(u[i]),e(n,o,r,l,c)},onSuccess:function(t,o,s){var i=u[s],a=n.replace(i,t);e(a,o,r,l,c)}})}else r(n,l)}(e,u,function(e,t){if(null===r[o]){if(t.forEach(function(e){return n.onError(e.xhr,c,e.url)}),!n.filter||n.filter.test(e)){var s=n.onSuccess(e,c,u);r[o]=!1===s?"":s||e}else r[o]="";l()}})}o.length?o.forEach(function(e,t){var o=e.getAttribute("href"),u=e.getAttribute("rel"),s="LINK"===e.nodeName&&o&&u&&"stylesheet"===u.toLowerCase(),i="STYLE"===e.nodeName;s?getUrls(o,{mimeType:"text/css",onError:function(o,c,u){r[t]="",n.onError(o,e,c),l()},onSuccess:function(n,r,l){var u=getFullUrl(o,location.href);c(n,t,e,u)}}):i?c(e.textContent,t,e,location.href):(r[t]="",l())}):n.onComplete("",[])}function getFullUrl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),o.href=t,r.href=e,r.href}function matchesSelector(e,t){return(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,t)}export default getCssData;
//# sourceMappingURL=get-css-data.esm.min.js.map
