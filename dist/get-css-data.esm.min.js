/*!
 * get-css-data
 * v1.6.1
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function getUrls(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={mimeType:t.mimeType||null,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},o=Array.isArray(e)?e:[e],r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(){return!("<"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().charAt(0))}function u(e,t){n.onError(e,o[t],t)}function s(e,t){var l=n.onSuccess(e,o[t],t);e=!1===l?"":l||e,r[t]=e,-1===r.indexOf(null)&&n.onComplete(r)}o.forEach(function(e,t){var o=document.createElement("a");o.setAttribute("href",e),o.href=String(o.href);var r=o.host!==location.host,c=document.all&&!window.atob,i=o.protocol===location.protocol;if(r&&c)if(i){var a=new XDomainRequest;a.open("GET",e),a.timeout=0,a.onprogress=Function.prototype,a.ontimeout=Function.prototype,a.onload=function(){l(a.responseText)?s(a.responseText,t):u(a,t)},a.onerror=function(e){u(a,t)},setTimeout(function(){a.send()},0)}else console.log("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol"),u(null,t);else{var p=new XMLHttpRequest;p.open("GET",e),n.mimeType&&p.overrideMimeType&&p.overrideMimeType(n.mimeType),n.onBeforeSend(p,e,t),p.onreadystatechange=function(){4===p.readyState&&(200===p.status&&l(p.responseText)?s(p.responseText,t):u(p,t))},p.send()}})}function getCssData(e){var t={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},n={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},o=Array.apply(null,n.rootElement.querySelectorAll(n.include)).filter(function(e){return!matchesSelector(e,n.exclude)}),r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(){if(-1===r.indexOf(null)){var e=r.join("");n.onComplete(e,r,o)}}function u(e,t,o,u){var c=n.onSuccess(e,o,u);(function e(t,o,r,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var i=s(t,r,c);i.rules.length?getUrls(i.absoluteUrls,{onBeforeSend:function(e,t,r){n.onBeforeSend(e,o,t)},onSuccess:function(e,t,r){var l=n.onSuccess(e,o,t),u=s(e=!1===l?"":l||e,t,c);return u.rules.forEach(function(t,n){e=e.replace(t,u.absoluteRules[n])}),e},onError:function(n,s,a){u.push({xhr:n,url:s}),c.push(i.rules[a]),e(t,o,r,l,u,c)},onComplete:function(n){n.forEach(function(e,n){t=t.replace(i.rules[n],e)}),e(t,o,r,l,u,c)}}):l(t,u)})(e=void 0!==c&&!1===Boolean(c)?"":c||e,o,u,function(e,u){null===r[t]&&(u.forEach(function(e){return n.onError(e.xhr,o,e.url)}),!n.filter||n.filter.test(e)?r[t]=e:r[t]="",l())})}function s(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};return r.rules=(e.replace(t.cssComments,"").match(t.cssImports)||[]).filter(function(e){return-1===o.indexOf(e)}),r.urls=r.rules.map(function(e){return e.replace(t.cssImports,"$1")}),r.absoluteUrls=r.urls.map(function(e){return getFullUrl(e,n)}),r.absoluteRules=r.rules.map(function(e,t){var o=r.urls[t],l=getFullUrl(r.absoluteUrls[t],n);return e.replace(o,l)}),r}o.length?o.forEach(function(e,t){var o=e.getAttribute("href"),s=e.getAttribute("rel"),c="LINK"===e.nodeName&&o&&s&&"stylesheet"===s.toLowerCase(),i="STYLE"===e.nodeName;if(c)getUrls(o,{mimeType:"text/css",onBeforeSend:function(t,o,r){n.onBeforeSend(t,e,o)},onSuccess:function(n,r,l){var s=getFullUrl(o,location.href);u(n,t,e,s)},onError:function(o,u,s){r[t]="",n.onError(o,e,u),l()}});else if(i){var a=e.textContent;n.useCSSOM&&(a=Array.apply(null,e.sheet.cssRules).map(function(e){return e.cssText}).join("")),u(a,t,e,location.href)}else r[t]="",l()}):n.onComplete("",[])}function getFullUrl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,n=document.implementation.createHTMLDocument(""),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),o.href=t,r.href=e,r.href}function matchesSelector(e,t){return(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,t)}export default getCssData;
//# sourceMappingURL=get-css-data.esm.min.js.map
